<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
    <script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <style> 
    .dis{
        display: block;
    }
  
    .hover :hover{
        cursor: pointer;

    }



    input
        {
            width: 220px;         
        }

        .Qform 
        {
            margin-left: 30px;
        }
        .belowLabel 
        {
            font-size: 11px;
        }
        
        #SubjectDoubt 
        {
            font-size: small;
        }
        #QueryNo 
        {
            width: 60px;
        }

        .container {
        border: 2px solid #dedede;
        background-color: #f1f1f1;
        border-radius: 5px;
        width: fit-content;
        padding: 10px;
        margin: 40px 0;
        margin-left:2rem;
        }

        .darker {
        border-color: #ccc;
        background-color: #ddd;
        }

        .container::after {
        content: "";
        clear: both;
        display: table;
        }

        .container img {
        float: left;
        max-width: 60px;
        width: 100%;
        margin-right: 20px;
        border-radius: 50%;
        }

        .container img.right {
        float: right;
        margin-left: 20px;
        margin-right:0;
        }

        .time-right {
        float: right;
        color: #aaa;
        }

        .time-left {
        float: left;
        color: #999;
        }

        label 
        {
            font-weight: bold;
        }

        .voting 
        {
            width: 100px;
            height: 200px;
        }
    </style>
    <title>Notes share</title>
</head>

<body>
    <nav class="navbar">
        <div class="logo">noteshare</div>
         
        <a href="#" class="toggle-button">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </a>
        <div class="navbar-links">
          <ul>
         <div class="loged_in"> 
             <div class="profile_pic"> </div>
            <p><i>you are not loged in</i></p>
            <h3 class="hover"> <a href="./login.html">login</a> </h3>
        </div>
        <li><a href="./index.html"> HOME</a></li>
            <li><a href="./login.html"> login</a></li>
            <li><a href="./about.html">About</a></li>
          
          </ul>
          <div class="search">
            <input type="text" placeholder="Search a topic">
        </div>
        </div>
      
      </nav>
    <hr>
   
        <!--   <aside class="side">
            <h2>Similar topics</h2>
            <ul>
                <li>DSA</li>
                <li>Automata</li>
                <li>English</li>
            </ul>
        </aside>-->
        <main class="main grid">
            <div class="rate">
                <button id="upvote">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                        <path id="Vector" d="M2 25H34L18 9L2 25Z" fill="black"/>
                        </g>
                        </svg>                        
                </button>
                <span id="vote-ct">69</span>
                <button id="downvote">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                        <path id="Vector" d="M34 11L2 11L18 27L34 11Z" fill="black"/>
                        </g>
                        </svg>                        
                </button>
            </div>
            <div class="pdf-view">
                <iframe id="pdf" src="./resume.pdf" height="500px" width="100%" frameborder="0"></iframe>
            </div>
            <div class="details">
                <h2 class="topic-title">Topic title</h2>
                <p class="author">Author name</p>
                <p class="desc">The description will go here. 
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur sunt quasi dicta voluptatem recusandae? Repellat minima amet culpa hic possimus expedita eum, sequi tenetur quisquam nesciunt, nulla fugit, necessitatibus omnis.</p>
            </div>
            <!-- <div class="comments">
                <form class="comment-form" action="" method="post">
                    <input type="text" placeholder="Type a comment here">
                    <button type="submit">Comment</button>
                </form>
                <div class="comment">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam esse culpa dignissimos odit mollitia dolor magni, cum odio maxime corporis error, impedit at repudiandae nobis ipsam doloribus optio voluptates unde.</p>
                    <span class="cmtr">- Commenter name</span>
                </div>
                <div class="comment">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam esse culpa dignissimos odit mollitia dolor magni, cum odio maxime corporis error, impedit at repudiandae nobis ipsam doloribus optio voluptates unde.</p>
                    <span class="cmtr">- Commenter name</span>
                </div>
                <div class="comment">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam esse culpa dignissimos odit mollitia dolor magni, cum odio maxime corporis error, impedit at repudiandae nobis ipsam doloribus optio voluptates unde.</p>
                    <span class="cmtr">- Commenter name</span>
                </div>
                
            </div> -->
        </main>  
    
        <div class="Qform">
          <label for="">Your Name</label>
          <p class="belowLabel">Please enter your name so that we will get back to you</p>
          <input type="text" id="Name" name="username" required>
          <br>
          <label for="">Title</label>
          <p class="belowLabel">Be Specific and imagine you're asking a question to another person</p>
          <input type="text" id="SubTitle" name="title" required>
    
          <br>
          <label for="">Ask Your Doubt</label>
          <p class="belowLabel">Include all the information someone would need to answer your question</p>
          <textarea name=""  id="comment" cols="30" rows="6" name="username" required ></textarea>
    
          <br>
          <label for="">Topic</label>
          <p class="belowLabel">Please mention the question is based under which topic</p>
          <select name="" id="SubjectDoubt" name="username" required>
              <option value="DSA">DSA</option>
              <option value="Javscript">Javscript</option>
              <option value="Programming">Programming</option>
              <option value="Maths">Maths</option>
              <option value="OOPS">Object Oriented Programming</option>
              <option value="Others">Others</option>
          </select>
          <br> 
          <label for="">Captcha No.</label>
          <p class="belowLabel">Choose any number between 1-1000</p>
          <input type="text"  id="QueryNo" value="" name="captcha" required>
          <br>
          <br>
    
          <button type="button" id="Insbtn" class="btn btn-primary">Submit Form</button>
      </div>
    
    
    
      
      <h2>Doubt Qurries</h2>
    
    
    
      <div class="container mt-3">
          <table class="table table-dark">
              <thead>
                  <th>Sno</th>
                  <th>Name</th>
                  <th>Subject</th>
                  <th>DoubtTitle</th>
                  <th>Doubt</th>
                  <th>QuerryNo</th>
              </thead>
    
              <tbody id="tbody1"></tbody>
          </table>
      </div>
    
    <footer>
        Copyright &copy; 2022-Present notesShare
    </footer>
</body>
<script src="./app.js">
    const wrapper = document.getElementById("login")
  
    function change(){
        wrapper.classList.toggle("dis")
    } 
</script>

<script type="module">

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.2/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
    apiKey: "AIzaSyCUTbGVCDA0THWUySE9--2cG2NsE-okJFs",
    authDomain: "noteshare-b02d3.firebaseapp.com",
    projectId: "noteshare-b02d3",
    storageBucket: "noteshare-b02d3.appspot.com",
    messagingSenderId: "373935912718",
    appId: "1:373935912718:web:1271f8193213444726495f",
    measurementId: "G-T9RX5BEEEB"
    };

    const app = initializeApp(firebaseConfig);
    // const analytics = getAnalytics(app);
    import {getDatabase, ref ,get,set, child,update,remove, onValue}
    from "https://www.gstatic.com/firebasejs/9.8.2/firebase-database.js";

    const db = getDatabase();


    var name = document.getElementById("Name");
    var queryNo = document.getElementById("QueryNo");
    var comment = document.getElementById("comment");
    var subject = document.getElementById("SubjectDoubt");
    var title = document.getElementById("SubTitle");

    var insBtn = document.getElementById("Insbtn");


    var stno=0;
    var tbody = document.getElementById('tbody1');

    function AddItemToTable(name,queryNo,comment,subject,title){

        let trow = document.createElement("tr");
        let td1 = document.createElement('td');
        let td2 = document.createElement('td');
        let td3 = document.createElement('td');
        let td4 = document.createElement('td');
        let td5 = document.createElement('td');
        let td6 = document.createElement('td');
        

        td1.innerHTML = ++stno;
        td2.innerHTML = name;
        td3.innerHTML = subject ;
        td6.innerHTML = title;
        td5.innerHTML = comment;
        td4.innerHTML= queryNo;
    
        

       // td6.innerText='<button><img src="https://img.icons8.com/arcade/50/undefined/experimental-edit-arcade.png"/></button>'


        trow.appendChild(td1);
        trow.appendChild(td2);
        trow.appendChild(td3);
        trow.appendChild(td4);
        trow.appendChild(td5);
        trow.appendChild(td6);

        tbody.appendChild(trow);
        
    }

    function AddAllItemsToTable(TheStudent){
        stno=0;
        tbody.innerHTML='';
        TheStudent.forEach(element => {
            AddItemToTable(element.Name,element.SubTitle,element.Comment,element.Subject,element.Querry);
        })
    }


    function GetAllDataOnce()
    {
        const dbRef= ref(db);

        get(child(dbRef,"NotesShare"))
        .then((snapshot) => {
            var student =[];

            snapshot.forEach(childSnapshot =>{
                student.push(childSnapshot.val());
            });
            AddAllItemsToTable(student);
        })
    }

    function InsertData()
    {
        set(ref(db,"NotesShare/"+queryNo.value),{
            Name:name.value,
            SubTitle:title.value,
            Subject:subject.value,
            Comment:comment.value,
            Querry:queryNo.value,
        })
        .then(()=>{
            alert("Data stored sucessfully");
        })
        .catch((error)=>{
            alert("Unsuccesful ,error "+error);
        });
    }


   // insBtn.addEventListener('click',InsertData);

    function SelectData()
    {
        const dbref = ref(db);
        get(child(dbref,"NotesShare/"+queryNo.value)).then((snapshot)=>{
            if(snapshot.exists())
            {
                name.value = snapshot.val().Name;
                subject.value = snapshot.val().Subject;
                comment.value = snapshot.val().Comment;
            }

            else 
            {
                alert("no data found");
            }
        })
        .catch((error)=>{
            alert("unsucessful , error "+error);
        });
    }

    function UpdateData()
    {
        update(ref(db,"NotesShare/"+queryNo.value),{
            Name:name.value,
            Subject:subject.value,
            Comment:comment.value,
        })
        .then(()=>{
            alert("Data updated sucessfully");
        })
        .catch((error)=>{
            alert("Unsuccesful ,error "+error);
        });
    }


    function DeleteData()
    {
        remove(ref(db,"NotesShare/"+queryNo.value))
        .then(()=>{
            alert("Data deleted sucessfully");
        })
        .catch((error)=>{
            alert("Unsuccesful ,error "+error);
        });
    }
    insBtn.addEventListener('click',InsertData);
    // selBtn.addEventListener('click',SelectData);
    // updBtn.addEventListener('click',UpdateData);
    // delBtn.addEventListener('click',DeleteData);


    window.onload = GetAllDataOnce;

</script>

</html>